**** 2018.06.20 ****
Пред.файл 
[1] - srv-osvita5-180619(devise);

*/-1
Поскольку ввод первого пользователя (см.[1], п.3.8)
похоже был неудачным, поработаю в консоле, как это делается в МХ, 
см.раздел "6.1.3 Создание объектов user";

*/- 1.1
Сначала перехожу на ветку  'devise'

*/- 1.2
... и захожу в песочницу:
alex@www:~/rails_projects/osvita$ rails console --sandbox

*/- 1.3
И оказалось, что 1-й пользователь ЗАПИСАН В БД!!!!

*/- 1.4
Дальше по МХ 
User.new

**//- Отступаю от изучения БД в консоли, и

Создаю "роль Postgres" = 'osvita',

*/- 1.5 -1.8 
                                   List of roles
 Role name |                         Attributes                         | Member of 
-----------+------------------------------------------------------------+-----------
 alex      | Superuser, Create role, Create DB                          | {}
 osvita    | Create DB                                                  | {alex}
 poisk9    | Create DB                                                  | {alex}
 postgres  | Superuser, Create role, Create DB, Replication, Bypass RLS | {}

*/- 1.10
Возвращаюсь в консоль:

*/- 1.11
Согласно МХ создаю нового пользователя ... 
(он почему то не записался ни с "правильным" адресом почты, ни с неправильным) :
**//- ЯтД, не записался потому, что я не заполнил поле пароля - см.в МХ "6.3.5 Создание пользователя"

*/- 1.12
Пробую еще такую хитроть для проверки наличия полей в User:

2.4.1 :015 > user1.sign_in_count
 => 0 

2.4.1 :016 > user1.locked_at
 => nil 
Похоже, что ВСЕ ПОЛЯ НА МЕСТЕ!!!!
Поэтому закончу с консолью ...

*/- 2
и просто просмотрю МХ дальше.

*/- 2.1
Просматривая валидацию ("6.2 Валидации User")

В разделе
**** ==> Configuration for :validatable ****
есть
config.password_length = 6..128
и
config.email_regexp = /\A[^@\s]+@[^@\s]+\z/

Причем, валидация для email у МХ мощнее))

VALID_EMAIL_REGEX = /\A[\w+\-.]+@[a-z\d\-.]+\.[a-z]+\z/i


*/- 2.2
Записываю в свой Gemfile новейшую версию 
gem 'bcrypt', '~> 3.1.12'

*/- 2.3
Двигаюсь дальше по МХ 
Аналогично 
---- "Листинг 7.1. Добавление отладочной информации к шаблону сайта.
app/views/layouts/application.html.erb "
добавляю в ../osvita/app/views/layouts/application.html.erb
<%= debug(params) if Rails.env.development? %>

*/- 2.4
Добавлю стили, как и в МХ,
Листинг 7.2. Добавление кода для красивого блока с отладочной информацией, включая примесь Sass.
app/assets/stylesheets/custom.css.scss 
**//- этот файл у меня не подключился - см.п.2.5 - 2.7
	поэтому стили я записал в итоге в application.scss,

*/- 3.1 - 3.4
Возвращаюсь в ЮТ, №12, 26:00
Добавляю
  gem "letter_opener"
**//- для перехвата сообщений на почту при Рег

*/- 3.5
Ввожу новых пользователей - перехватчик работает!!!!

*/- 4
Теперь нужно добавить flash;

*/- 4.1 - 4.4
На ЮТ это устанавливается в Уроке 3, 10:00;
Про вывод (view) flash начинается на 11:50;
Проверяю - РАБОТАЕТ!!!!


*/- 4.5
Дальше, как и в ЮТ, 
заменяю ... чтобы выводились все виды уведомлений:

          <div class="alert alert-<%= name %>">

Обновляю - теперь у меня все выводится на белое))
Я понял почему - у меня не присваивается name: в контроллерах!!!!

*/- 5
Теперь перехожу на ЮТ №12 
чтобы посмотреть там образец изменений для того,
чтобы flash работала после установки Devise;

*/- 5.1 - 5.4
**//- Как на ЮТ, создаю хелпер bootstrap_class_for(name);
	Ошибок нет, но все выводится на белом фоне;

*/*- 5.4
Поскольку на зеленом фоне смотрится лучше,
то верну (пока) из п.4.1
          <div class="alert alert-success">

*/- 5.5 коммит, пуш

   d289c92..2bc170b  master -> master



*/- 5.6
alex@www:~/rails_projects/osvita$ git checkout devise

*/- 5.7
Прослушивая другое ЮТ,
там отключили модуль 'Confirmable', 
который "позволяет отправлять письмо с инструкциями для подтверждения аккаунта, созданного во время регистрации."

Во-1х, м.б.и мне отключить?
во-2х, значит поле, которое фиксирует ответ из почты тоже д.б. "промаркировано" этим модулем?

*/- 6
Сравню в консоле поля для меня и зарегистрированных:

Получается, что у тех, кто сделал подтверждение,
в поле 'confirmed_at' стоит дата,
а у меня nil;

*/- 7.1
Перехваченные сообщения о регистраации записываются в файлы,
которые хранятся в папке ../osvita/tmp/letter_opener

*/- 7.2
Меняю почтовый адрес "отправителя" из сайта (при Рег)

Было
config.mailer_sender = 'please-change-me-at-config-initializers-devise@example.com'

я его закомент.и записал в новой строке
config.mailer_sender = 'osvita@example.com'

*/- 7.3
... нашел еще интересные настройки:
1) "Период, когда пользователю разрешен доступ к веб-сайту 
даже без подтверждающие их учетную запись.

2) "Период, когда пользователю разрешено подтвердить свою учетную запись 
    до того, как токен становится недействительным. 

*/- 7.4
Попробавал еще раз без 
  # gem "letter_opener"

и
  # config.action_mailer.delivery_method = :letter_opener

- не получилось((

Вводил еще своих 2 адреса - 
sashagajdarenko@gmail.com
oo.kabas@gmail.com

- теперь они оба "зависли"))

След.файл srv-osvita7-180622(mailer)
